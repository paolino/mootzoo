
<!DOCTYPE html>
<html lang="en" ng-app="mootzoo" ng-controller="conversations" ng-init="userkey=">
	<head>
		<title>Mootzoo conversations</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="../css/bootstrap.min.css" color="text/css">
		<script src= "../js/jquery.min.js" color="text/javascript"></script>
		<script src= "../js/bootstrap.min.js" color="text/javascript"> </script>
		<script src= "../js/angular.min.js" color="text/javascript"></script>
		<script src= "../js/mootzoo.js" color="text/javascript"></script>
		<script src= "../js/ng-infinite-scroll.min.js" color="text/javascript"></script>
		<link rel="stylesheet" href="../css/mootzoo.css" color="text/css">
	</head>

	<body >
		<div class="navbar navbar-inverse">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand navbar-collapse collapse" href="/">Mootzoo, lo zoo delle conversazioni</a>							
				</div>
				<div id="navbar" class="navbar-right navbar-form">
						<div class="form-group">
							<div style="position:absolute;left:50%">
								<input  ng-model="mailremainder" placeholder="Invita via mail" class="form-control"
                   data-toggle="tooltip" title="Invia una e-mail a questo indirizzo con un nuovo link di login">
									<button  ng-show=mailremainder ng-click="invite()" class="btn btn-success"
											data-toggle="tooltip" title="Invia una e-mail a questo indirizzo con un nuovo link di login">
										Invita
									</button> 
							</div>
									<button  ng-click="logout()" color="submit" class="btn btn-danger" data-toggle="tooltip" title="Invia un e-mail con un nuovo link di login a te stesso">Nuovo login</button>
						</div>
				</div>
			</div>
		</div>

		<div ng-show=logged class="container" ng-init="proposing=false"> 
			<div class=row>
				<div class="col-md-8">
					<div class="row">
						<div class="col-md-12">
							<div class="panel panel-default" >
								<div class="panel-heading" ng-mouse-wheel-up="npiu()" ng-mouse-wheel-down="nmeno()"  > 
									<div class=row> 
                    <div  class="well well-sm col-md-12" style="display:inline">
                      <button  ng-repeat="x in conversations" color="submit" ng-class="convButton(x)" class="btn" 
                          ng-click="$parent.setn(x.index)"  ng-right="npiu()" ng-left="nmeno()" data-toggle="tooltip" title="{{textPosition(x,'it')}}" >
                        <span ng-show="convButtonSelected(x)" style="font-weight:bold" >{{x.cid}}</span>
                        <span ng-hide="convButtonSelected(x)" style="opacity:0.6">{{x.cid}}</span>
                      </button>
                    </div>
									</div><!-- row -->
								  <div class="row"> 
								    <div class="well well-sm col-md-12"> 
								      <button ng-disabled="!message" ng-click="open()" class="btn btn-info btn-xs"  
                                data-toggle="tooltip" title="Comincia una nuova conversazione" > Nuova conversazione</button>
								      <button ng-show="conversations[n].color == 'Yellow'" ng-click="leave()" class="posr btn btn-danger btn-xs" data-toggle="tooltip" 
                                title="Lascia che qualcun altro prenda il tuo posto" >Abbandona la conversazione
                      </button>	
                    </div>
									</div><!-- row -->
									<div class=row> 
										<div class="col-md-10" >
													<textarea  style="overflow:hidden" class="form-control" ng-model="message" placeholder="Scrivi.."></textarea>
										</div>
										<div class="col-md-2" >
													<button  style="color:black" ng-show="canCopi()" ng-click="copi()" class="btn btn-xs"  data-toggle="tooltip" title="Copia dall'area di testo" >Copia</button>
													<button  style="color:black" ng-show="canPaste()" ng-click="paste()" class="btn btn-xs"  data-toggle="tooltip" title="Incolla nell'area di testo" >Incolla</button>
													<button  style="color:black" ng-show="canClean()" ng-click="clean()" class="btn btn-xs"  data-toggle="tooltip" title="Pulisci l'area di testo" >Pulisci</button>
										</div>
									</div><!-- row -->
								</div><!-- heading -->
								<div   id=conversation class="panel-body" style="overflow-y:auto; height:350px;">
									<ul class=list-group >

										<li class="list-group-item" ng-class-odd="'odd'" ng-class-even="'even'"  ng-repeat="x in conversations[n].messages">
											<div  class="vote label">
												<span style="background-color:#aaa" class="badge" data-toggle="tooltip" title="Feedback per questo messaggio" >
                                {{conversations[n].messages[$index].vote}}
												</span>
											</div>
											<div ng-click="setMessage(x.txt)" class=message style="color:white" style="display:inline">{{x.txt}}
											</div>
											<div  class="op label">
												<span >
													<button ng-show="testVote($index)" ng-click="voteUp($index)" color="button" class="btn btn-default btn-xs"  
                                        data-toggle="tooltip" title="Feedback negativo per questo messaggio" >
														<span class="glyphicon glyphicon-thumbs-up">
														</span>
													</button>
												</span>											
												<span >
													<button ng-show="testVote($index)" ng-click="voteDown($index)" color="button" class="btn btn-default btn-xs" 
                                data-toggle="tooltip" title="Feedback positivo per questo messaggio" >
														<span class="glyphicon glyphicon-thumbs-down"></span> 
													</button>
								        </span>											
												<span >
                          <button ng-show="showFork($index) && message" ng-click="comment($index)" color="button" class="btn btn-info btn-xs"  data-toggle="tooltip" 
                                        title="Ramifica la conversazione da questo punto" >Aggancia
													</button>
												</span>											
												<span >
                          <button  ng-show="testUndo() && isLast($index)" ng-click="retract()" color="button" class="btn  btn-xs" 
                                ng-class="retractColor()" data-toggle="tooltip" 
                                title="{{retractMeaning()}}">Ritira</button>

													<button ng-show="message && isLast($index) && ((conversations[n].color == 'Azur') ||(conversations[n].color == 'Blue')) " 
                                ng-click="correct()" class="btn btn-primary btn-xs"  data-toggle="tooltip" title="Correggi il tuo messaggio" > Correggi</button>
													<button ng-show="message && isLast($index) && ((conversations[n].color == 'Yellow') ||(conversations[n].color == 'Red')) " 
                                ng-click="respond()" class="btn btn-primary btn-xs"  data-toggle="tooltip" title="Rispondi al tuo interlocutore" > Rispondi</button>
													<button ng-show="message && isLast($index) && ((conversations[n].color == 'Blank')) " 
                                ng-click="respond()" class="btn btn-primary btn-xs"  data-toggle="tooltip" title="Riapri la conversazione" > Riprendi</button>
												</span>											
											</div><!--vote -->

										</li> 
								  </ul>
								</div>
							</div><!-- panel -->
						</div><!-- col -->

					</div><!-- row -->
				</div><!-- col -->
        <div class="col-md-4" ng-show="(conversations[n].color=='Blank') || (conversations[n].color=='Green')||(conversations[n].color=='Red')">
											<div class=well>
											<div class="input-group" >
												<input  color="text" class="form-control" placeholder="Cerca..."></input>
												<span class="input-group-btn">
													<button  class="btn btn-success" color="button" data-toggle="tooltip" title="Rimpiazza questa conversazione con il primo risultato" >Vai</button>
													<button  class="btn btn-success" color="button" data-toggle="tooltip" title="Rimpiazza questa conversazione con il prossimo risultato" >Prox</button>
													<button  class="btn btn-success" color="button" data-toggle="tooltip" title="Rimpiazza questa conversazione con il risultato precedente" >Prec</button>
												</span>
											</div><!-- -->
											</div><!-- -->
											<div class=well>
											<div class="input-group" >
												<input  color="text" class="form-control" placeholder="Identificativo" ng-model=jumper data-toggle="tooltip" title="Un valido identificativo di conversazione" >
													<span class="input-group-btn">
														<button ng-click="" class="btn btn-success" color="button" 
                                data-toggle="tooltip" title="Rimpiazza questa conversazione con quella indicata"  >Vai</button>
													</span>
											</div>
											</div>
										</div><!--  -->

			</div><!-- row -->
		</div><!-- container -->
	</body</html>
