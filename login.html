
<!DOCTYPE html>
<html lang="en" ng-app="app" ng-controller="conversations" ng-init="userkey=;username=;">
  <head>
    <title>MootZoo Forest</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="../favicon.png" type="image/x-icon"/>
    <link rel="stylesheet" href="../css/bootstrap.min.css" color="text/css">
    <link rel="stylesheet" href="../jquery-ui-1.11.4/jquery-ui.min.css" color="text/css">
    <link rel="stylesheet" href="../css/xeditable.css" color="text/css">
    <link rel="stylesheet" href="../css/mootzoo.css" color="text/css">

    <script src= "../js/jquery.min.js" color="text/javascript"></script>
    <script src= "../js/bootstrap.min.js" color="text/javascript"> </script>
    <script src= "../js/angular.min.js" color="text/javascript"></script>
    <script src= "../js/ui-bootstrap-tpls-0.13.0.js" color="text/javascript"></script>
    <script src= "../jquery-ui-1.11.4/jquery-ui.min.js" color="text/javascript"></script>
    <script src= "../js/xeditable.js" color="text/javascript"></script>
    <script src= "../js/mootzoo.js" color="text/javascript"></script>

  </head>

  <body style="background: linear-gradient(75deg, #def, #fde);">
    <div id=moot class=top ng-init="mooting=false">
      <button  class="btn btn-warning" ng-click="mooting=true" data-toggle="tooltip" title="Nuova discusssione">
        <span class="glyphicon glyphicon-bullhorn"/>
      </button>
      <div ng-show=mooting>
        <div class=response>
          <div>
          <button  class="btn btn-xs btn-success" ng-click="mooting=false;moot()" data-toggle="tooltip" title="Posta">
            <span class="glyphicon glyphicon-ok"/>
          </button>
        </div>  
          <div>
          <button  class="btn btn-xs btn-danger" ng-click="mooting=false;input.message=null" data-toggle="tooltip" title="Lascia">
            <span class="glyphicon glyphicon-remove"/>
          </button>
        </div>  
        </div>  
        <textarea class=form-control id=textmoot placeholder="Proponi ......" ng-model="input.message"> </textarea>
      </div>
    </div>
    <div id=login class="dropdown top">
      <button id=login class="login btn btn-success dropdown-toggle" data-toggle="dropdown"> {{username}} 
      </button>
      <ul class="dropdown-menu dropdown-menu-right">
        <li> 
          <a  ng-click="logout()" data-toggle="tooltip" title="Invia un nuovo link di login alla tua mail.">               
            <span class="glyphicon glyphicon-off"/> Esci
          </a> 
        </li>
        <li>
          <a  ng-click="invite()" data-toggle="tooltip" title="Invia una e-mail di invito ad un'altro indirizzo">               
            <span class="glyphicon glyphicon-send"/> Invita
          </a> 
        </li>
      </ul>
    </div>
    <div class=top id=tags>
      <ul class="nav nav-pills nav-stacked">
        <li ng-repeat="x in labels"  ng-class="filterActive(x)"> 
          <a  ng-click="setLabelfilter(x)" data-toggle="tooltip" title="mostra le conversazioni in questa classe">               
            {{x}}
          </a> 
        </li>
      </ul>
    </div>
    <div class=containerb>
      <div ng-repeat="x in following">
        <div ng-style="margin($index,30)" class="bitem {{'bitem'+x.id}}"  ng-show="contains(filtered,x.id)" >
            <span class=item > 
              <span style="float:right" class="">
                  <span data-toggle="tooltip" title="Nuovi messaggi" class="badge news">{{x.notifications.newscount}}</span>
                  <span data-toggle="tooltip" title="Nuovi interventi" class="badge branches">{{x.notifications.branchcount}}</span>
              </span>
              <span class="message" >
                  <span class=mex> {{redate(x.date) |date :'dd-MMM-yy HH:mm'}} &nbsp&nbsp&nbsp</span> 
                  <span style="color:#222"> {{x.text}} </span>
              </span>
          </span>
              <span >
                <ul style="background-color:#eee" class="list-group list-inline"> 
                  <li class=list-group-item ng-repeat="l in x.labels"> 
                    <div ng-if="l !== '****'"> <a buttons=no editable-text="l" onbeforesave="updateLabel(x,l,$data)"> {{l}} </a> </div>  

                    <div ng-if="l === '****'"> <a buttons=no editable-text="null" onbeforesave="updateLabel(x,l,$data)" e-placeholder="Nuova etichetta">  <span class="glyphicon glyphicon-plus"/> </a> </div> </li>
 
                  <li class=dropdown> 
                    <a class="dropdown-toggle" data-toggle="dropdown">               
                      <span class="glyphicon glyphicon-minus"/>
                    </a> 
                    <ul class="dropdown-menu dropdown-menu-right list-group">
                      <li class=list-group-item ng-repeat="l in x.labels"> <a ng-click="removeLabel(l,x)"> {{l}} </a> </li> 
                    </ul>
                  </li>
                </ul>
              </span>
          </div> 
        </div> 
      </div> 
  </body>
</html>
